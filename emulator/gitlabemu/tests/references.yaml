.template:
  variables:
    COLOR: red
    SHAPE: triangle
  artifacts:
    paths:
      - pwd.txt

.base:
  script:
    - date
    - df -h

job1:
  variables:
    COLOR: !reference [.template, variables, COLOR]
    KUBERENETES_CPU_REQUEST: 3

  script:
    - uname -a
    - !reference [.base, script]
    - pwd > pwd.txt
  artifacts:
    paths: !reference [.template, artifacts, paths]

job2:
  variables: !reference [.template, variables]
  script:
    - ps -ef